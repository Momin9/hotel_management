{% extends 'base_luxury.html' %}

{% block title %}Dashboard - AuraStay Management{% endblock %}
{% block page_title %}Executive Dashboard{% endblock %}
{% block page_subtitle %}Real-time insights and premium hotel operations at your fingertips{% endblock %}

{% block content %}
<!-- Executive Summary Cards -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
    <!-- Total Rooms -->
    <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-royal-500 to-royal-700 p-8 hover-lift luxury-shadow">
        <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"></div>
        <div class="relative">
            <div class="flex items-center justify-between mb-4">
                <div class="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center">
                    <i class="fas fa-bed text-2xl text-white"></i>
                </div>
                <div class="text-right">
                    <div class="text-3xl font-bold text-white">{{ total_rooms }}</div>
                    <div class="text-royal-200 text-sm font-medium">Total Rooms</div>
                </div>
            </div>
            <div class="flex items-center text-royal-200">
                <i class="fas fa-arrow-up text-green-400 mr-2"></i>
                <span class="text-sm">12% increase</span>
            </div>
        </div>
    </div>

    <!-- Occupancy Rate -->
    <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-green-500 to-green-700 p-8 hover-lift luxury-shadow">
        <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"></div>
        <div class="relative">
            <div class="flex items-center justify-between mb-4">
                <div class="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center">
                    <i class="fas fa-chart-pie text-2xl text-white"></i>
                </div>
                <div class="text-right">
                    <div class="text-3xl font-bold text-white">{{ occupancy_rate|floatformat:0 }}%</div>
                    <div class="text-green-200 text-sm font-medium">Occupancy</div>
                </div>
            </div>
            <div class="flex items-center text-green-200">
                <i class="fas fa-users text-white mr-2"></i>
                <span class="text-sm">{{ occupied_rooms }} occupied</span>
            </div>
        </div>
    </div>

    <!-- Revenue -->
    <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-gold-500 to-gold-700 p-8 hover-lift luxury-shadow">
        <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"></div>
        <div class="relative">
            <div class="flex items-center justify-between mb-4">
                <div class="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center">
                    <i class="fas fa-dollar-sign text-2xl text-white"></i>
                </div>
                <div class="text-right">
                    <div class="text-3xl font-bold text-white">${{ daily_revenue|floatformat:0 }}</div>
                    <div class="text-gold-200 text-sm font-medium">Today's Revenue</div>
                </div>
            </div>
            <div class="flex items-center text-gold-200">
                <i class="fas fa-trending-up text-white mr-2"></i>
                <span class="text-sm">+8% vs yesterday</span>
            </div>
        </div>
    </div>

    <!-- Guest Satisfaction -->
    <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-purple-500 to-purple-700 p-8 hover-lift luxury-shadow">
        <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"></div>
        <div class="relative">
            <div class="flex items-center justify-between mb-4">
                <div class="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center">
                    <i class="fas fa-star text-2xl text-white"></i>
                </div>
                <div class="text-right">
                    <div class="text-3xl font-bold text-white">4.9</div>
                    <div class="text-purple-200 text-sm font-medium">Guest Rating</div>
                </div>
            </div>
            <div class="flex items-center text-purple-200">
                <i class="fas fa-heart text-red-400 mr-2"></i>
                <span class="text-sm">{{ total_guests }} guests</span>
            </div>
        </div>
    </div>
</div>

<!-- Room Status Overview -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
    <!-- Room Status Chart -->
    <div class="lg:col-span-2 bg-white rounded-3xl p-8 luxury-shadow hover-lift">
        <div class="flex items-center justify-between mb-8">
            <h3 class="text-2xl font-bold text-luxury-800">Room Status Overview</h3>
            <div class="flex items-center space-x-2">
                <button class="px-4 py-2 bg-royal-100 text-royal-700 rounded-xl font-medium hover:bg-royal-200 transition-colors">Today</button>
                <button class="px-4 py-2 text-luxury-600 hover:bg-luxury-100 rounded-xl font-medium transition-colors">Week</button>
                <button class="px-4 py-2 text-luxury-600 hover:bg-luxury-100 rounded-xl font-medium transition-colors">Month</button>
            </div>
        </div>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
            <div class="text-center p-6 bg-green-50 rounded-2xl border-2 border-green-100 hover:border-green-300 transition-colors">
                <div class="w-16 h-16 bg-green-500 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check text-white text-xl"></i>
                </div>
                <div class="text-3xl font-bold text-green-600 mb-2">{{ available_rooms }}</div>
                <div class="text-green-700 font-medium">Available</div>
            </div>
            
            <div class="text-center p-6 bg-yellow-50 rounded-2xl border-2 border-yellow-100 hover:border-yellow-300 transition-colors">
                <div class="w-16 h-16 bg-yellow-500 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user text-white text-xl"></i>
                </div>
                <div class="text-3xl font-bold text-yellow-600 mb-2">{{ occupied_rooms }}</div>
                <div class="text-yellow-700 font-medium">Occupied</div>
            </div>
            
            <div class="text-center p-6 bg-blue-50 rounded-2xl border-2 border-blue-100 hover:border-blue-300 transition-colors">
                <div class="w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-broom text-white text-xl"></i>
                </div>
                <div class="text-3xl font-bold text-blue-600 mb-2">{{ dirty_rooms }}</div>
                <div class="text-blue-700 font-medium">Cleaning</div>
            </div>
            
            <div class="text-center p-6 bg-red-50 rounded-2xl border-2 border-red-100 hover:border-red-300 transition-colors">
                <div class="w-16 h-16 bg-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-tools text-white text-xl"></i>
                </div>
                <div class="text-3xl font-bold text-red-600 mb-2">{{ maintenance_rooms }}</div>
                <div class="text-red-700 font-medium">Maintenance</div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="bg-white rounded-3xl p-8 luxury-shadow hover-lift">
        <h3 class="text-2xl font-bold text-luxury-800 mb-8">Quick Actions</h3>
        <div class="space-y-4">
            <a href="{% url 'crm:create' %}" class="group flex items-center p-4 bg-gradient-to-r from-royal-500 to-royal-600 rounded-2xl text-white hover:from-royal-600 hover:to-royal-700 transition-all duration-200 transform hover:scale-105">
                <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mr-4">
                    <i class="fas fa-user-plus text-xl"></i>
                </div>
                <div>
                    <div class="font-semibold">Add Guest</div>
                    <div class="text-royal-200 text-sm">Create new profile</div>
                </div>
                <i class="fas fa-arrow-right ml-auto group-hover:translate-x-1 transition-transform"></i>
            </a>
            
            <a href="{% url 'hotels:hotel_create' %}" class="group flex items-center p-4 bg-gradient-to-r from-green-500 to-green-600 rounded-2xl text-white hover:from-green-600 hover:to-green-700 transition-all duration-200 transform hover:scale-105">
                <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mr-4">
                    <i class="fas fa-building text-xl"></i>
                </div>
                <div>
                    <div class="font-semibold">Add Hotel</div>
                    <div class="text-green-200 text-sm">New hotel location</div>
                </div>
                <i class="fas fa-arrow-right ml-auto group-hover:translate-x-1 transition-transform"></i>
            </a>
            
            <a href="{% url 'pos:menu' %}" class="group flex items-center p-4 bg-gradient-to-r from-gold-500 to-gold-600 rounded-2xl text-white hover:from-gold-600 hover:to-gold-700 transition-all duration-200 transform hover:scale-105">
                <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mr-4">
                    <i class="fas fa-utensils text-xl"></i>
                </div>
                <div>
                    <div class="font-semibold">Manage Menu</div>
                    <div class="text-gold-200 text-sm">Food & beverages</div>
                </div>
                <i class="fas fa-arrow-right ml-auto group-hover:translate-x-1 transition-transform"></i>
            </a>
            
            <a href="{% url 'billing:dashboard' %}" class="group flex items-center p-4 bg-gradient-to-r from-purple-500 to-purple-600 rounded-2xl text-white hover:from-purple-600 hover:to-purple-700 transition-all duration-200 transform hover:scale-105">
                <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mr-4">
                    <i class="fas fa-chart-line text-xl"></i>
                </div>
                <div>
                    <div class="font-semibold">View Analytics</div>
                    <div class="text-purple-200 text-sm">Revenue insights</div>
                </div>
                <i class="fas fa-arrow-right ml-auto group-hover:translate-x-1 transition-transform"></i>
            </a>
        </div>
    </div>
</div>

<!-- Hotels Overview -->
{% if hotels %}
<div class="bg-white rounded-3xl p-8 luxury-shadow hover-lift mb-12">
    <div class="flex items-center justify-between mb-8">
        <h3 class="text-2xl font-bold text-luxury-800">Hotels Portfolio</h3>
        <a href="{% url 'hotels:hotel_create' %}" class="px-6 py-3 bg-royal-600 text-white rounded-2xl font-medium hover:bg-royal-700 transition-colors">
            <i class="fas fa-plus mr-2"></i>Add Hotel
        </a>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for hotel in hotels %}
        <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-luxury-50 to-luxury-100 p-6 border-2 border-luxury-200 hover:border-royal-300 transition-all duration-200 hover-lift">
            <div class="absolute top-0 right-0 w-20 h-20 bg-royal-500/10 rounded-full -mr-10 -mt-10"></div>
            <div class="relative">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-12 h-12 bg-royal-500 rounded-xl flex items-center justify-center">
                        <i class="fas fa-building text-white"></i>
                    </div>
                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">Active</span>
                </div>
                <h4 class="text-xl font-bold text-luxury-800 mb-2">{{ hotel.name }}</h4>
                <p class="text-luxury-600 text-sm mb-4">{{ hotel.address|truncatechars:50 }}</p>
                <div class="flex items-center justify-between">
                    <div class="text-sm text-luxury-600">
                        <i class="fas fa-bed mr-1"></i>
                        {% with hotel.room_types.all as room_types %}
                            {% for rt in room_types %}{{ rt.rooms.count }}{% if not forloop.last %} + {% endif %}{% endfor %} rooms
                        {% endwith %}
                    </div>
                    <a href="{% url 'hotels:room_list' hotel.id %}" class="text-royal-600 hover:text-royal-700 font-medium">
                        View Details <i class="fas fa-arrow-right ml-1"></i>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- System Status -->
<div class="bg-white rounded-3xl p-8 luxury-shadow hover-lift">
    <h3 class="text-2xl font-bold text-luxury-800 mb-8">System Status & Activity</h3>
    <div class="space-y-4">
        {% for activity in recent_activities %}
        <div class="flex items-center p-4 bg-luxury-50 rounded-2xl hover:bg-luxury-100 transition-colors">
            <div class="w-12 h-12 bg-{{ activity.color }}-100 rounded-xl flex items-center justify-center mr-4">
                <i class="fas {{ activity.icon }} text-{{ activity.color }}-600"></i>
            </div>
            <div class="flex-1">
                <p class="font-semibold text-luxury-800">{{ activity.text }}</p>
                <p class="text-sm text-luxury-600">{{ activity.time }}</p>
            </div>
            <div class="w-3 h-3 bg-{{ activity.color }}-500 rounded-full animate-pulse"></div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}